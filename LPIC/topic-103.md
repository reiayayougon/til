### オンラインマニュアルページ

lsコマンドのオンラインマニュアルページを参照するコマンド
```
man ls
```
Linuxでは、コマンドや設定ファイルのためのオンラインマニュアルページ(manページ)が用意されている。
オンラインを参照するコマンドはman

sambaというキーワードを一部に含むmanページを検索するコマンド
```
man -k samba
apropos samba
```

manオプション
|オプション|説明|
|-k|キーワドに一部一致するコマンドやファイルのmanページを一覧表示(aprosコマンドと同じ)|
|-f|キーワードに完全一位するコマンドやファイルのmanページを一覧表示|

whatisデータベースとは、オンラインマニュアルページに関する情報を蓄積するデータベースのこと
makewhatisコマンドを実行することで作成、または更新される
### 出力

fileファイルを行番号をつけて出力するコマンド
```
cat -n file
nl -b a file
```
指定したファイルを行番号つけて出力するには、nlやcatコマンドを使用

catコマンドオプション
|オプション|説明|
|----|----|
|-n|空行を含めた全ての行に行番号をつける|
|-b|空行を除いた行に行番号をつける|

nlオプション
|オプション|説明|
|-b a|空行を含めた全ての行に行番号をつける|
|-b b|空行を除いた行に行番号をつける(デフォルト)|

httpd.confファイルの先頭500バイトを表示するコマンド
```
head -c 500 httpd.conf
```
-n 行数｜-行数 指定した行数をファイルの先頭から表示
-c バイト数 指定したバイト数をファイルの先頭から表示

指定したファイルの末尾部分を表示するコマンド
```
tail
```
|オプション|説明|
|----|----|
|-n 行数|-行数|指定した行数をファイルの末尾から表示|
|-c バイト数|指定したバイト数をファイルの末尾から表示|
|-f|ファイルの末尾に追加された行を表示し続ける|

テキストファイルの各行から指定したフィールドを取り出して表示するコマンド
```
cut
```
cutオプション
|オプション|説明|
|----|----|
|-c 文字数|抽出する文字位置を指定|
|-d 区切り文字|区切り文字を指定(デフォルトはタブ)|
|-f フィールド|抽出するフィールドを指定|


行単位でファイルの内容ソートするコマンド
```
sort
```
|オプション|説明|
|----|----|
|-b|行頭の空白を無視|
|-f|大文字、小文字を区別しない|
|-r|降順でソート(-rを指定しない限り昇順)|
|-t 区切り文字|指定した文字を区切り文字としてフィールドを認識|
|-k フィールド|ソート対象するフィールドを指定|
|-n|数字を文字でなく数値としてソート|

**wcコマンドはファイル内の文字数や行数を調べることができる**

|オプション|説明|
|-l|行数を表示|
|-w|単語数を表示|
|-c|文字(バイト)数を表示|
オプションをしてしなくても行数、単語数、文字(バイト)数が順に表示される

**trコマンドはしてした文字を変換・削除する**
trコマンドは変換対象を標準入力からのみ受け付けている。
つまり、変換・削除したい文字列が記載されているファイルをコマンドの引数として指定することはできない。そのため、パイプ(|)やリダイレクト(<)を使用してtrの標準入力にファイルの内容を渡す

fileファイル内でスペースが連続している場合、スペースを１つに置き換えて表示するコマンド
```
cat file | tr -s "  "
tr -s [:space:] < file
```

**書式**
tr [オプション] [文字列1[文字列2]]

|オプション|説明|
|----|----|
|-d|文字列1で指定した文字を削除|
|-s|文字列1で指定した文字が連続した場合、1文字に置き換える|
オプションをしてしない場合、文字列1を文字列2に変換する

trコマンドで使用する文字クラス

|文字クラス|説明|
|----|----|
|[:alpha:]|英字|
|[:lower:]|英小文字(a-z)|
|[:upper:]|英大文字(A-Z)|
|[:digit]|数字(0-9)|
|:alnum:|英数字|
|:space:]|スペース|



**odコマンドはファイルの内容を8進数や16進数で表示する**

|オプション|説明|
|-t|出力フォーマットを指定|
|-o|8進数2バイト区切りで表示|
|-x|１６進数2バイト区切りで表示|
|-c|ASCⅡ文字またはバックスラッシュ付きのエスケープ文字で表示|

***nuiqコマンドはソートされているファイルにある連続して重複していない行のみを表示する**

|オプション|説明|
|----|----|
|-d|重複している行のみを表示|
|-u|重複していない行のみを表示|


### メッセージダイジェスト
メッセージダイジェスト(ハッシュ値)とは入力にハッシュ関数を使用して計算される固定長の値。
入力データが異なる場合、出力されるメッセージダイジェストは変化する。そのため、データの改竄が行われていないかどうかを確認するために使う
-c | --checkオプションで読み込んだファイルの値と照合できる

### シェルと環境変数

#### 環境変数とは
変数を設定したシェル上と、そこから起動されるシェルやアプリケーション、コマンドで有効な変数。
これは設定が子プロセスに引き継がれる事を意味する
環境変数はexportコマンドを使用して作成することができる

またexportコマンドはシェル変数を環境変数に変更できる
expor シェル変数名

#### シェル変数
変数を設定したシェル上でのみ有効な変数。
シェル変数は以下のようにして作成
シェル変数=値

**設定されている変数一覧**
set 全てのシェル変数と環境変数を表示
env 全ての環境変数を表示
printenv 一部、またはずべての環境変数を表示

echoコマンドを使用して、ここのシェル変数または環境変数の値を

### splitコマンド
指定した行数でファイルを分割するする
-行数または-lオプションでファイルを何行ごとに分割するかを指定できる
デフォルト1000行
また出力されるファイル名には、出力ファイル名で指定したファイル名の末尾に「aa」「ab」「ac」などの文字列が順番につく


### メタキャラ

変数DATAに「data」という文字列(現在の日時を表示するコマンド)を格納した。以下の実行結果
```
$ echo "$DATE"

==>data
```
**ダブルクォーテイションの場合**
「"」はシェルによって特別に解釈されるメタキャラ。「"」で囲まれているメタキャラを通常の文字として扱う(エスケープ)します。「$」「`」「」「"」のメタキャラは除く
$はエスケープされない為、文字列ではなく変数として扱われる。
echoコマンドの引数が変数の場合は、変数に格納されている文字列が表示されるので
実行結果としてdateが表示される

**シングルクォーテイションの場合**
通常echoコマンドは$で始まる文字は変数とみなし、その変数に格納された値を表示するが、「'」で囲まれている$は文字列とみなし、$DATAが実行結果となる

**バッククォーテーションの場合**
シェルは「`」で囲まれた文字列(変数の場合は、変数に格納されれている値)をコマンドと見なし、
このコマンドの実行結果を文字列として使用。


DATA=`date`コマンドを実行した後に以下のコマンドを実行した結果
```
$ echo \"$DATE\"
==>dateコマンドを実行した時の日時
```
`で囲まれた文字列(変数の場合は、変数に格納されている値)をコマンドと見なし、そのコマンドの実行結果を文字列として使用`
\は直後にあるメタキャラを通常の文字として扱う
$は続く文字列を変数と見做す

### 環境変数

環境変数PATHに値を追加する場合はexport PATH=$PATH:値のようにする
$PATHの部分が現在設定されている値に変化されるので、そこに値を追加するということ。

環境変数PATHに/user/local/testディレクトリを追加する場合

```
$ export PATH=$PATH:/user/local/test
```
これでパスを指定しなくてもコマンド名を入力するだけで、/usr/local/testディレクトリにあるコマンドを実行できるようになる(PATHを通す)
 
### アーカイブ

cpio形式のアーカイブを扱うにはcpioコマンドを使用
ciopコマンドは標準入力や標準出力を使用。
なので、入力ファイルや出力ファイルをコマンドとしの引数として指定することはできない。
そのためfindやlsコマンドなどでアーカイブにまとめるファイル(入力ファイル)の一覧を取り出し、
パイプを使用してcpioコマンドの標準出力に渡す。
また、作成するアーカイブ(出力ファイル)はリダイレクトの「>」を使用

cpioコマンドもtarコマンドと同じく、複数のファイルをまとめて一つのファイル(アーカイブ)にする、またはアーカイブを展開する際に使用するコマンド(バックアップなどに使用される)


tarコマンド
複数のファイルをまとめて一つのファイル(アーカイブ)にする、またアーカイブを展開する際に使用するコマンド

**書式**
tar [オプション] [ファイルまたはディレクトリ]

|オプション|説明|
|----|----|
|-c|新しいアーカイブ作成|
|-x|アーカイブからファイルを展開|
|-f|アーカイブファイル名を指定|
|-v|処理の詳細情報の表示|
|-t|アーカイブの内容を一覧表示|

testディレクトリをxz形式で圧縮したtest.tar.xzというアーカイブするコマンド
```
tar cfJ test.tar.xz test   #アーカイブファイル名の指定が先
```

### 標準出力へ送信

bzip2形式で圧縮されたconfugure.bz2ファイルを展開して標準出力へ送信するコマンド
```
bzcat cofigure.bz2
```
ファイルの内容を標準出力へ送信んするコマンドはcatコマンド
しかし圧縮されたファイルの場合もそのまま送信するため正しく表示がされない
bzip2形式で圧縮されたファイルを展開して直接標準出力へ送信するにはbzcatコマンド

xz形式の場合xzcatコマンド
[![Image from Gyazo](https://i.gyazo.com/d50bbe137c92b67fd7ec80beb3b924f9.png)](https://gyazo.com/d50bbe137c92b67fd7ec80beb3b924f9)

gzip形式の場合zcatコマンド

### 圧縮
bzip2よりも圧縮率が高い圧縮形式として、LZMA2圧縮アルゴリズムを採用したxzフォーマットがある。
xzとbxip2よりも多くのCPU/メモリを要求するが、その分圧縮率が高く、また展開速度はbzip2よりも短いためファイル配布時の圧縮形式として採用されることが増えた

圧縮したファイルを展開したら圧縮したファイルは残らない
[![Image from Gyazo](https://i.gyazo.com/3c23ad2ad5a06c50cdb97eaeb1e298bc.jpg)](https://gyazo.com/3c23ad2ad5a06c50cdb97eaeb1e298bc)

### コピー
**ファイルからデバイスにコピーを行うにはddコマンド(データをコピーするコマンド)**
cpコマンドとは異なり、デバイス(デバイスファイル)を引数にとってデバイス間のコピー(バックアップ)や、フロッピー/CD-ROMのイメージをそのままコピーする

boot.imgというイメージファイルをUSBにコピーするコマンド
```
dd if=boot.img of=/dev/sdc
```

**cpコマンドと異なり、ブロックサイズを(bsオプション)とそのブロックをコピーする回数(countオプション)を指定してファイルを作成することができる**
入力ファイル(ifオプション)に「/dev/zero」を指定すると全データがnullであるファイルが作成される
dev/zeroはデータの上書きや、ddコマンドで内容の無い特定サイズのファイルを生成したい場合などに使用

cpコマンド
データをコピーするコマンド(サイズ指定できない)



|オプション|説明|
|----|----|
|if=入力ファイル|入力側ファイル(デバイス)を指定|
|of=出力ファイル|出力側ファイル(デバイス)を指定|
|bs=バイト数|入出力のブロックサイズ(一度に読み書きするバイト数)を指定。デフォルトは512バイト|
|count=回数|入力ファイルから出力ファイルへブロックをコピーする回数を指定|

ファイルやディレクトリをコピーするにはcpコマンド
cpコマンドを使用してファイルをコピーする際、コピー先に既存のファイルがあり上書きできない場合、そのファイルを削除してからコピーしたい場合のコマンド
```
cp -f file1 file2
```
[![Image from Gyazo](https://i.gyazo.com/f0d58a13150a799e958a3b396348998c.jpg)](https://gyazo.com/f0d58a13150a799e958a3b396348998c)
cpコマンドはデフォルトでファイルを上書きするが、権限などの理由で書き込み先のファイルが書き込みオープンできない場合、-fオプションはそのファイルを削除してからコピーする

同名のファイルやディレクトリがある場合は上書きするかどうか問い合わせる
[![Image from Gyazo](https://i.gyazo.com/b7550e8f9598538da361fe08935acd42.jpg)](https://gyazo.com/b7550e8f9598538da361fe08935acd42)

ファイルの属性(パーミッション、所有者、更新時間など)を保持したままコピー

[![Image from Gyazo](https://i.gyazo.com/da4c601a8722d56a63a49f641b8b1d03.jpg)](https://gyazo.com/da4c601a8722d56a63a49f641b8b1d03)
-pオプションを指定しない場合(実行したユーザによって変わる)
[![Image from Gyazo](https://i.gyazo.com/1671983eae2c1a6ffc68fcf62325a435.jpg)](https://gyazo.com/1671983eae2c1a6ffc68fcf62325a435)
**
-pオプションで所有者の情報を保持できるのはrootユーザのみ

### 基本的なファイルの管理


拡張子
.gz=====gzip形式(gzipコマンド、gunzipコマンド)
.bz2====bzip2形式(bzip2コマンド、bunzip2)
.cpio====cpio形式(cpioコマンド)
.xz====xz形式(xzコマンド、unxzコマンド)


### 削除

rmdirコマンド
空のディレクトリのみを削除する
-pはディレクトリ名に階層をしてした場合、削除するディレクトリの親ディレクトリを同時に削除

rmコマンド
ファイルやディレクトリを削除する

|オプション|説明|
|----|----|
|-f|削除してよいかどうか問い合わせない|
|-i|削除してよいかどうか問い合わせる|
|-r|-R|ディレクトリ全体を再帰的に削除|

### 移動

mv [オプション] 移動元(変更前) ファイル名またはディレクトリ名 移動先(変更後)ファイル名またはディレクトリ名
移動先に同名のファイルやディレクトリがある場合、強制的に上書き

